(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{FpsG:function(e,i,t){"use strict";t.d(i,"a",(function(){return r}));var n=t("EYJY"),o=t("ccoi"),a=t("Ub9n"),s=t("bwEX");let r=(()=>{class e{constructor(e,i,t){this._elementRef=e,this._fuseMediaMatchService=i,this._renderer=t,this._unsubscribeAll=new n.a}ngOnInit(){this._parent=this._renderer.parentNode(this._elementRef.nativeElement),this._parent&&(this._grandParent=this._renderer.parentNode(this._parent),this._fuseMediaMatchService.onMediaChange.pipe(Object(o.a)(this._unsubscribeAll)).subscribe(e=>{"xs"===e?this._removeClass():this._addClass()}))}ngOnDestroy(){this._parent&&(this._removeClass(),this._unsubscribeAll.next(),this._unsubscribeAll.complete())}_addClass(){this._renderer.addClass(this._grandParent,"inner-scroll")}_removeClass(){this._renderer.removeClass(this._grandParent,"inner-scroll")}}return e.\u0275fac=function(i){return new(i||e)(a.Tb(a.l),a.Tb(s.a),a.Tb(a.H))},e.\u0275dir=a.Ob({type:e,selectors:[["",8,"inner-scroll"]]}),e})()},"Ux+a":function(e,i,t){"use strict";t.r(i);var n=t("Fk62"),o=t("1xOk"),a=t("PUIy"),s=t("1rLY"),r=t("0sao"),c=t("CsWY"),l=t("hqWh"),p=t("N2ZZ"),d=t("YLls"),b=t("jHnc"),h=t("TYSv"),u=t("laIt"),g=t("RK+r"),m=t("t/D7"),f=t("zasx"),x=t("sUjR"),v=t("OHu/"),O=t("Ncdh"),S=t("FBrc"),_=t("6UlS"),w=t("/0p4"),C=t("jeC/");class A{constructor(e){switch(this.id=e.id,this.texto=e.texto,this.fecha=e.fecha,this.polaridad=e.polaridad,e.polaridad){case"positive":case"positiva":this.polarityColor="#03a9f4";break;case"neutra":this.polarityColor="brown";break;case"negativa":case"negativa":this.polarityColor="red"}this.userend=e.userend}}var L=t("Ub9n"),y=t("MOtY"),Y=t("vZS0");let E=(()=>{class e{constructor(e,i,t){this._httpClient=e,this.campaign=i,this.sharedVarService=t,this.searchText="",this.selectedOpinions=[],this.onOpinionsChanged=new _.a([]),this.oncurrentOpinionAspectsChanged=new _.a([]),this.onSelectedOpinionsChanged=new _.a([]),this.onCurrentOpinionChanged=new _.a([]),this.onFoldersChanged=new _.a([]),this.onFiltersChanged=new _.a([]),this.onLabelsChanged=new _.a([]),this.onUserDataChanged=new _.a([]),this.onSearchTextChanged=new _.a(""),this.onOpinionSelected=new _.a(!1),this.onOpinionsTotalOfCampChanged=new _.a(0),this.onAspectsTotalOfOpinionChanged=new _.a(0),this.currentOpinionAspects=[],this.onPageChanched=new _.a({pageIndex:"0",pageSize:"10"}),this.onLangChanched=new _.a(""),this.onUserIdChanched=new _.a(""),this.onTextChanched=new _.a(""),this.onPolarityChanched=new _.a(""),this.onDateStartChanched=new _.a(""),this.onDateEndChanched=new _.a("")}deleteSelectedOpinions(){throw new Error("Method not implemented.")}resolve(e,i){this.routeParams=e.params;let t=this.onPageChanched.value.pageIndex,n=this.onPageChanched.value.pageSize;return console.log("Find Information"),new Promise((e,i)=>{Promise.all([this.getFilters(),this.CountOpinionsofCampaign(),this.getOpinions(t,n)]).then(()=>{console.log("Data in resolve"),this.setCurrentOpinion(this.routeParams.opinionId?this.routeParams.opinionId:null),this.onSearchTextChanged.subscribe(e=>{this.searchText=e,this.getOpinions(t,n)}),e()},i)})}getOpinXIdioma(){let e=(new S.f).append("id",this.campaign.getMyCampsID()).append("page",(0).toString()).append("idioma","ingles");return this._httpClient.get(C.a.sails_services_urlpath+":"+C.a.sails_services_urlport+"/opinion/getOpinionXIdiomaCamp",{params:e})}getOpinion(){let e=this.campaign.getMyCampsIDEx();if(console.log("Data campaing info ",e),console.log("Id Data campaing info ",e.id),null==e||""===e)return null;{let i=(new S.f).append("id",e.id).append("page",(0).toString());return this._httpClient.get(C.a.sails_services_urlpath+":"+C.a.sails_services_urlport+"/opinion/getOpinion",{params:i})}}getAspectOpin(e,i){return new Promise((t,n)=>{this._httpClient.get(C.a.sails_services_urlpath+":"+C.a.sails_services_urlport+"/aspectoopinion/getAspecto",{params:{id:this.currentOpinion?this.currentOpinion.id:"",page:e,limit:i}}).subscribe(e=>{console.log("Aspectos ",e.data),console.log("Total Aspectos",e.count),this.onAspectsTotalOfOpinionChanged.next(e.count),this.currentOpinionAspects=e.data,console.log(this.currentOpinionAspects),this.oncurrentOpinionAspectsChanged.next(this.currentOpinionAspects),t(this.currentOpinionAspects)},n)})}getFilters(){return new Promise((e,i)=>{this._httpClient.get("api/opinion-filters").subscribe(i=>{this.filters=i,this.onFiltersChanged.next(this.filters),e(this.filters)},i)})}CountOpinionsofCampaign(){return new Promise((e,i)=>{this._httpClient.get(C.a.sails_services_urlpath+":"+C.a.sails_services_urlport+"/opinion/countOpinionsOfCampaign",{params:{id:this.sharedVarService.getId()}}).subscribe(i=>{console.log(i),this.onOpinionsTotalOfCampChanged.next(i.result),e(i.result)},i)})}getOpinions(e,i){return this.routeParams.filterHandle?this.getOpinionsByFilter(this.routeParams.filterHandle,e,i):this.getOpinionsAdvancedSearch(e,i,this.onUserIdChanched.value,this.onDateStartChanched.value,this.onDateEndChanched.value,this.onTextChanched.value,this.onPolarityChanched.value,this.onLangChanched.value)}getOpinionById(e){if(e==this.campaign.getCampaignId)return this.routeParams.filterHandle?this.getOpinionsByFilter(this.routeParams.filterHandle,0,""):(this.routeParams.pageIndex&&this.routeParams.pageSize&&this.getOpinionsByPages(this.routeParams.pageIndex,this.routeParams.pageSize),this.getOpinionsAdvancedSearch("0","","","","","","",""))}getOpinionsByFilter(e,i,t){return new Promise((n,o)=>{this._httpClient.get(C.a.sails_services_urlpath+":"+C.a.sails_services_urlport+"/opinion/getOpinionbyFilter",{params:{id:this.sharedVarService.getId(),handle:e,page:i,limit:t}}).subscribe(e=>{this.opinions=e.data.map(e=>new A(e)),this.opinions=w.a.filterArrayByString(this.opinions,this.searchText),this.onOpinionsChanged.next(this.opinions),this.onOpinionsTotalOfCampChanged.next(e.count),n(this.opinions)},o)})}getOpinionsByPages(e,i){return new Promise((e,i)=>this._httpClient.get(C.a.sails_services_urlpath+":"+C.a.sails_services_urlport+"/opinion/getOpinion",{params:{id:this.sharedVarService.getId(),page:"0",limit:"",criteria:"",filter:""}}).subscribe(i=>{console.log(i),this.opinions=i.data.map(e=>new A(e)),this.opinions=w.a.filterArrayByString(this.opinions,this.searchText),console.log(this.opinions),this.opinions=w.a.filterArrayByString(this.opinions,this.searchText),this.onOpinionsChanged.next(this.opinions),e(this.opinions)},i))}toggleSelectedOpinion(e){if(this.selectedOpinions.length>0)for(const i of this.selectedOpinions)if(i.id===e){const e=this.selectedOpinions.indexOf(i);if(-1!==e)return this.selectedOpinions.splice(e,1),void this.onSelectedOpinionsChanged.next(this.selectedOpinions)}this.selectedOpinions.push(this.opinions.find(i=>i.id===e)),this.onSelectedOpinionsChanged.next(this.selectedOpinions)}toggleSelectAll(){this.selectedOpinions.length>0?this.deselectOpinions():this.selectOpinions()}selectOpinions(e,i){this.selectedOpinions=[],void 0===e||void 0===i?this.selectedOpinions=this.opinions:this.selectedOpinions.push(...this.opinions.filter(t=>t[e]===i)),this.onSelectedOpinionsChanged.next(this.selectedOpinions)}deselectOpinions(){this.selectedOpinions=[],this.onSelectedOpinionsChanged.next(this.selectedOpinions)}setCurrentOpinion(e){this.currentOpinion=this.opinions.find(i=>i.id===e),this.onOpinionSelected.next(!0),this.onCurrentOpinionChanged.next(this.currentOpinion)}setFolderOnSelectedOpinions(e){this.selectedOpinions.map(e=>{this.deleteOpinions(e.id)}),this.deselectOpinions()}updateOpinion(e){return new Promise((i,t)=>{this._httpClient.post("api/opinions-opinions/"+e.id,Object.assign({},e)).subscribe(e=>{this.getOpinions("0","10").then(e=>{e&&this.currentOpinion&&this.setCurrentOpinion(this.currentOpinion.id),i(e)},t)})})}getOpinionsFromBAck(e,i,t,n){return new Promise((o,a)=>this._httpClient.get(C.a.sails_services_urlpath+":"+C.a.sails_services_urlport+"/opinion/getOpinion",{params:{id:this.sharedVarService.getId(),page:e,limit:i,criteria:t,filter:n}}).subscribe(e=>{console.log(e),this.opinions=e.data.map(e=>new A(e)),this.opinions=w.a.filterArrayByString(this.opinions,this.searchText),this.onOpinionsChanged.next(this.opinions),o(this.opinions)},a))}deleteOpinions(e){return new Promise((i,t)=>{this._httpClient.delete(C.a.sails_services_urlpath+":"+C.a.sails_services_urlport+"/opinion/deleteOpinion",{params:{id:e}}).subscribe(e=>{this.getOpinions("0","10").then(e=>{}).catch(e=>{}),i(e)},t)})}getOpinionsAdvancedSearch(e,i,t,n,o,a,s,r){return new Promise((c,l)=>{this._httpClient.get(C.a.sails_services_urlpath+":"+C.a.sails_services_urlport+"/opinion/getOpinionsAdvancedSearch",{params:{id:this.sharedVarService.getId(),date_start:n,user_id:t,date_end:o,text:a,polarity:s,lang:r,page:e,limit:i}}).subscribe(e=>{this.opinions=e.data.map(e=>new A(e)),this.opinions=w.a.filterArrayByString(this.opinions,this.searchText),this.onOpinionsChanged.next(this.opinions),this.onOpinionsTotalOfCampChanged.next(e.count),c(this.opinions)},c)})}}return e.\u0275fac=function(i){return new(i||e)(L.dc(S.c),L.dc(y.a),L.dc(Y.a))},e.\u0275prov=L.Pb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var F=t("8VHZ"),Z=t("EYJY"),I=t("ccoi"),T=t("+3x0"),N=t("S5zL");const k={lang:"en",data:{MAIL:{COMPOSE:"COMPOSE",FOLDERS:"FOLDERS",FILTERS:"FILTERS",LABELS:"LABELS",NO_MESSAGES:"There are no messages!",SELECT_A_MESSAGE_TO_READ:"Select a message to read",SEARCH_PLACEHOLDER:"Search for an e-mail or contact"},OPINION:{OPINIONS:"OPINIONS",COMPOSE:"COMPOSE",SEARCH:"Advanced Search",FOLDERS:"FOLDERS",FILTERS:"FILTERS",LABELS:"LABELS",NO_MESSAGES:"There are no messages!",SELECT_A_MESSAGE_TO_READ:"Select a message to read",SEARCH_PLACEHOLDER:"Search for an e-mail or contact",POLARITY:"Polarity",ASPECT:"Aspects",DIALOGTITLE:"New Search"},FILTERS:{ALL:"All",TODAY:"Today",YESTERDAY:"Yesterday",LAST15DAYS:"Last 15 days",POSITIVE:"Positive",NEGATIVE:"Negative",NEUTRAL:"Neutral"}}},P={lang:"tr",data:{MAIL:{COMPOSE:"YEN\u0130 E-POSTA",FOLDERS:"KLAS\xd6RLER",FILTERS:"F\u0130LTRELER",LABELS:"ET\u0130KETLER",NO_MESSAGES:"Mesajiniz bulunmamakta!",SELECT_A_MESSAGE_TO_READ:"Okumak i\xe7in bir mesaj se\xe7in",SEARCH_PLACEHOLDER:"E-mail yada bir ki\u015fi aray\u0131n"},OPINION:{COMPOSE:"YEN\u0130 E-POSTA",SEARCH:"Advanced Search",FOLDERS:"KLAS\xd6RLER",FILTERS:"F\u0130LTRELER",LABELS:"ET\u0130KETLER",NO_MESSAGES:"Mesajiniz bulunmamakta!",SELECT_A_MESSAGE_TO_READ:"Okumak i\xe7in bir mesaj se\xe7in",SEARCH_PLACEHOLDER:"E-mail yada bir ki\u015fi aray\u0131n",POLARITY:"",ASPECT:""}}};var D=t("0u4M"),R=t("ZYkU"),M=t("DviW"),H=t("zZ4M"),j=t("FpsG"),z=t("RONT"),U=t("G+XH");const B={lang:"es",data:{MAIL:{COMPOSE:"Crear",FOLDERS:"Carpetas",FILTERS:"Filtros",LABELS:"Etiquetas",NO_MESSAGES:"No hay mensajes!",SELECT_A_MESSAGE_TO_READ:"Seleccione un mensaje para leer",SEARCH_PLACEHOLDER:"Buscar por un e-mail o contacto"},OPINION:{OPINIONS:"OPINIONES",COMPOSE:"Crear",SEARCH:"B\xfasqueda Avanzada",FOLDERS:"Carpetas",FILTERS:"Filtros",LABELS:"Etiquetas",NO_MESSAGES:"No hay mensajes!",SELECT_A_MESSAGE_TO_READ:"Seleccionar un mensaje para leer",SEARCH_PLACEHOLDER:"Buscar por un e-mail o contacto",POLARITY:"Polaridad",ASPECT:"Aspectos",DIALOGTITLE:"Nueva B\xfasqueda"},FILTERS:{ALL:"Todas",TODAY:"Hoy",YESTERDAY:"Ayer",LAST15DAYS:"\xdaltimos 15 d\xedas",POSITIVE:"Positiva",NEGATIVE:"Negativa",NEUTRAL:"Neutra"}}};var G=t("5epJ"),V=t("qQg5"),q=t("FBYz"),J=t("mcTK"),$=t("Yvf7");function W(e,i){if(1&e&&(L.Zb(0,"mat-option",21),L.Nc(1),L.Yb()),2&e){const e=i.$implicit;L.tc("value",e.id),L.Fb(1),L.Pc(" ",e.nombre," ")}}function X(e,i){if(1&e&&(L.Zb(0,"mat-option",21),L.Nc(1),L.Yb()),2&e){const e=i.$implicit;L.tc("value",e),L.Fb(1),L.Pc(" ",e," ")}}function K(e,i){if(1&e&&(L.Zb(0,"mat-option",21),L.Nc(1),L.Yb()),2&e){const e=i.$implicit;L.tc("value",e),L.Fb(1),L.Pc(" ",e," ")}}let Q=(()=>{class e{constructor(e,i,t,n,o){this.matDialogRef=e,this._data=i,this._fuseTranslationLoaderService=t,this._opinionService=n,this._userEndService=o,this.users_end=[],this.polarities=["positiva","negativa","neutra"],this.langs=["ingl\xe9s","espa\xf1ol"],this._unsubscribeAll=new Z.a,this.composeForm=this.createComposeForm(),this.showExtraToFields=!1,this._fuseTranslationLoaderService.loadTranslations(k,B),this._userEndService.getInvitados().pipe(Object(I.a)(this._unsubscribeAll)).subscribe(e=>{this.users_end=e.data,console.log(e)})}createComposeForm(){return new F.g({from:new F.d({disabled:!0}),users:new F.d(this.users_end.length>0?this.users_end[0]:""),lang:new F.d(this.langs[0]),polarity:new F.d(this.polarities[0]),date_start:new F.d(""),date_end:new F.d(""),text:new F.d("")})}toggleExtraToFields(){this.showExtraToFields=!this.showExtraToFields}}return e.\u0275fac=function(i){return new(i||e)(L.Tb(r.f),L.Tb(r.a),L.Tb(R.a),L.Tb(E),L.Tb(G.a))},e.\u0275cmp=L.Nb({type:e,selectors:[["opinion-compose"]],decls:50,vars:12,consts:[[1,"dialog-content-wrapper"],[1,"mat-accent","m-0"],["fxFlex","","fxLayout","row","fxLayoutAlign","space-between center"],[1,"title","dialog-title"],["mat-icon-button","","aria-label","Close dialog",3,"click"],["mat-dialog-content","","fusePerfectScrollbar","",1,"p-24","m-0"],["name","composeForm","fxLayout","column","fxFlex","",1,"compose-form",3,"formGroup"],["appearance","outline"],["matInput","","name","date_start","formControlName","date_start","type","date"],["matInput","","name","date_end","formControlName","date_end","type","date"],[1,"show-hide-extra-fields",3,"click"],[3,"fxShow"],["appearance","outline","fxFlex","100"],["matInput","","formControlName","users"],[3,"value",4,"ngFor","ngForOf"],["appearance","outline",3,"fxShow"],["matInput","","formControlName","lang"],["matInput","","formControlName","polarity"],["matInput","","name","text","formControlName","text","rows","6"],["mat-dialog-actions","","fxLayout","row","fxLayoutAlign","space-between center",1,"m-0","p-16"],["mat-raised-button","","color","accent","aria-label","ACCEPT",1,"save-button",3,"disabled","click"],[3,"value"]],template:function(e,i){1&e&&(L.Zb(0,"div",0),L.Zb(1,"mat-toolbar",1),L.Zb(2,"mat-toolbar-row",2),L.Zb(3,"span",3),L.Nc(4),L.mc(5,"translate"),L.Yb(),L.Zb(6,"button",4),L.hc("click",(function(e){return i.matDialogRef.close()})),L.Zb(7,"mat-icon"),L.Nc(8,"close"),L.Yb(),L.Yb(),L.Yb(),L.Yb(),L.Zb(9,"div",5),L.Zb(10,"form",6),L.Zb(11,"mat-form-field",7),L.Zb(12,"mat-label"),L.Nc(13,"Data Start"),L.Yb(),L.Ub(14,"input",8),L.Yb(),L.Zb(15,"mat-form-field",7),L.Zb(16,"mat-label"),L.Nc(17,"Data End"),L.Yb(),L.Ub(18,"input",9),L.Yb(),L.Zb(19,"div",10),L.hc("click",(function(e){return i.toggleExtraToFields()})),L.Zb(20,"span",11),L.Nc(21,"Show More Fileds"),L.Yb(),L.Zb(22,"span",11),L.Nc(23,"Hide Fileds"),L.Yb(),L.Yb(),L.Zb(24,"mat-form-field",12),L.Zb(25,"mat-label"),L.Nc(26,"User"),L.Yb(),L.Zb(27,"mat-select",13),L.Lc(28,W,2,2,"mat-option",14),L.Yb(),L.Ub(29,"mat-error"),L.Yb(),L.Zb(30,"mat-form-field",15),L.Zb(31,"mat-label"),L.Nc(32,"Language"),L.Yb(),L.Zb(33,"mat-select",16),L.Lc(34,X,2,2,"mat-option",14),L.Yb(),L.Yb(),L.Zb(35,"mat-form-field",12),L.Zb(36,"mat-label"),L.Nc(37,"Polarity"),L.Yb(),L.Zb(38,"mat-select",17),L.Lc(39,K,2,2,"mat-option",14),L.Yb(),L.Ub(40,"mat-error"),L.Yb(),L.Zb(41,"mat-form-field",15),L.Zb(42,"mat-label"),L.Nc(43,"Text"),L.Yb(),L.Zb(44,"textarea",18),L.Nc(45,"                "),L.Yb(),L.Yb(),L.Yb(),L.Yb(),L.Zb(46,"div",19),L.Zb(47,"div"),L.Zb(48,"button",20),L.hc("click",(function(e){return i.matDialogRef.close(i.composeForm)})),L.Nc(49," Accept "),L.Yb(),L.Yb(),L.Yb(),L.Yb()),2&e&&(L.Fb(4),L.Oc(L.nc(5,10,"OPINION.DIALOGTITLE")),L.Fb(6),L.sc("formGroup",i.composeForm),L.Fb(10),L.sc("fxShow",!i.showExtraToFields),L.Fb(2),L.sc("fxShow",i.showExtraToFields),L.Fb(6),L.sc("ngForOf",i.users_end),L.Fb(2),L.sc("fxShow",i.showExtraToFields),L.Fb(4),L.sc("ngForOf",i.langs),L.Fb(5),L.sc("ngForOf",i.polarities),L.Fb(2),L.sc("fxShow",i.showExtraToFields),L.Fb(7),L.sc("disabled",i.composeForm.invalid))},directives:[h.a,h.c,V.a,V.c,V.b,o.b,l.a,r.d,q.a,F.w,F.p,F.h,c.b,c.f,p.b,F.b,F.o,F.f,J.b,b.a,$.s,c.a,r.c,s.n],pipes:[f.c],styles:["@media screen and (max-width:599px){.mail-compose-dialog{width:100%}}@media screen and (min-width:600px){.mail-compose-dialog{width:640px}}.mail-compose-dialog .mat-dialog-container{padding:0}.mail-compose-dialog .mat-dialog-container .compose-form .mat-form-field{width:100%}.mail-compose-dialog .mat-dialog-container .compose-form .show-hide-extra-fields{text-align:right;cursor:pointer;font-size:12px}.mail-compose-dialog .mat-dialog-container .compose-form .attachment-list{font-size:13px}.mail-compose-dialog .mat-dialog-container .compose-form .attachment-list .attachment{border:1px solid;border-radius:20px;padding-left:16px;margin-top:8px}.mail-compose-dialog .mat-dialog-container .compose-form .attachment-list .attachment .filename{font-weight:600}.mail-compose-dialog .mat-dialog-container .compose-form .attachment-list .attachment:last-child{margin-bottom:0}.mail-compose-dialog .dialog-content-wrapper{max-height:85vh;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}"],encapsulation:2}),e})();function ee(e,i){if(1&e&&(L.Zb(0,"mat-icon",13),L.Nc(1),L.Yb()),2&e){const e=L.lc().$implicit;L.sc("ngClass",e.color),L.Fb(1),L.Oc(e.icon)}}const ie=function(){return["active","accent"]};function te(e,i){if(1&e&&(L.Zb(0,"div",10),L.Zb(1,"a",11),L.Lc(2,ee,2,2,"mat-icon",12),L.Zb(3,"span"),L.Nc(4),L.Yb(),L.Yb(),L.Yb()),2&e){const e=i.$implicit;L.Fb(1),L.sc("routerLink","/apps/opinionMailbox/filter/"+e.handle)("routerLinkActive",L.uc(4,ie)),L.Fb(1),L.sc("ngIf",e.icon),L.Fb(2),L.Oc(e.title)}}const ne=function(){return{delay:"50ms",scale:"0.2"}},oe=function(e){return{value:"*",params:e}},ae=function(){return{delay:"100ms",x:"-25px"}},se=function(){return{y:"50px"}};let re=(()=>{class e{constructor(e,i,t){this._opinionService=e,this._matDialog=i,this._fuseTranslationLoaderService=t,this._fuseTranslationLoaderService.loadTranslations(k,P,B),this.accounts={creapond:"johndoe@creapond.com",withinpixels:"johndoe@withinpixels.com"},this.selectedAccount="creapond",this._unsubscribeAll=new Z.a}ngOnInit(){this._opinionService.onFoldersChanged.pipe(Object(I.a)(this._unsubscribeAll)).subscribe(e=>{this.folders=e}),this._opinionService.onFiltersChanged.pipe(Object(I.a)(this._unsubscribeAll)).subscribe(e=>{console.log(e),this.filters=e}),this._opinionService.onLabelsChanged.pipe(Object(I.a)(this._unsubscribeAll)).subscribe(e=>{this.labels=e})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}composeDialog(){this.dialogRef=this._matDialog.open(Q,{panelClass:"mailbox-compose-dialog"}),this.dialogRef.afterClosed().subscribe(e=>{if(!e)return;const i=e;console.log(i),this._opinionService.onLangChanched.next(i.value.lang),this._opinionService.onUserIdChanched.next(i.value.users),this._opinionService.onDateStartChanched.next(i.value.date_start),this._opinionService.onDateEndChanched.next(i.value.date_end),this._opinionService.onTextChanched.next(i.value.text),this._opinionService.onPolarityChanched.next(i.value.polarity),this._opinionService.getOpinions(this._opinionService.onPageChanched.value.pageIndex,this._opinionService.onPageChanched.value.pageSize).then(e=>{console.log(e)}).catch(e=>{})})}}return e.\u0275fac=function(i){return new(i||e)(L.Tb(E),L.Tb(r.b),L.Tb(R.a))},e.\u0275cmp=L.Nb({type:e,selectors:[["mailbox-main-sidebar"]],decls:17,vars:22,consts:[["fxLayout","column","fxLayoutAlign","space-between start",1,"header","accent","p-24","pb-4"],["fxFlex","","fxLayout","row","fxLayoutAlign","start center",1,"logo"],[1,"logo-icon","s-32"],[1,"logo-text"],["fusePerfectScrollbar","",1,"content"],[1,"px-24","pt-32","pb-12"],["mat-raised-button","","aria-label","Compose",1,"mat-accent","compose-dialog-button","w-100-p",3,"click"],[1,"nav","material2"],[1,"nav-subheader"],["class","nav-item",4,"ngFor","ngForOf"],[1,"nav-item"],["matRipple","",1,"nav-link",3,"routerLink","routerLinkActive"],["class","nav-link-icon",3,"ngClass",4,"ngIf"],[1,"nav-link-icon",3,"ngClass"]],template:function(e,i){1&e&&(L.Zb(0,"div",0),L.Zb(1,"div",1),L.Zb(2,"mat-icon",2),L.Nc(3,"mail "),L.Yb(),L.Zb(4,"span",3),L.Nc(5),L.mc(6,"translate"),L.Yb(),L.Yb(),L.Yb(),L.Zb(7,"div",4),L.Zb(8,"div",5),L.Zb(9,"button",6),L.hc("click",(function(e){return i.composeDialog()})),L.Nc(10),L.mc(11,"translate"),L.Yb(),L.Yb(),L.Zb(12,"div",7),L.Zb(13,"div",8),L.Nc(14),L.mc(15,"translate"),L.Yb(),L.Lc(16,te,5,5,"div",9),L.Yb(),L.Yb()),2&e&&(L.Fb(2),L.sc("@animate",L.vc(14,oe,L.uc(13,ne))),L.Fb(2),L.sc("@animate",L.vc(17,oe,L.uc(16,ae))),L.Fb(1),L.Oc(L.nc(6,7,"OPINION.OPINIONS")),L.Fb(2),L.sc("@animate",L.vc(20,oe,L.uc(19,se))),L.Fb(3),L.Pc(" ",L.nc(11,9,"OPINION.SEARCH")," "),L.Fb(4),L.Oc(L.nc(15,11,"OPINION.FILTERS")),L.Fb(2),L.sc("ngForOf",i.filters))},directives:[V.c,V.b,V.a,l.a,q.a,o.b,$.s,n.j,s.r,n.i,$.t,$.q,J.a],pipes:[f.c],styles:["mailbox-main-sidebar{display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:100%}mailbox-main-sidebar .header .logo .logo-icon{margin:0 16px 0 0}mailbox-main-sidebar .header .logo .logo-text{font-size:24px;line-height:24px}mailbox-main-sidebar .header .account{width:100%}"],encapsulation:2,data:{animation:U.a}}),e})();var ce=t("Adbh");function le(e,i){if(1&e&&(L.Zb(0,"div",15),L.Nc(1),L.mc(2,"slice"),L.mc(3,"htmlToPlaintext"),L.Yb()),2&e){const e=L.lc();L.Fb(1),L.Qc(" ",L.pc(2,2,L.nc(3,6,e.opinion.texto),0,180),"",e.opinion.texto.length>180?"...":""," ")}}const pe=function(e){return{"background-color":e}};let de=(()=>{class e{constructor(e){this._opinionService=e,this._unsubscribeAll=new Z.a}ngOnInit(){this.opinion=new A(this.opinion),this._opinionService.onSelectedOpinionsChanged.pipe(Object(I.a)(this._unsubscribeAll)).subscribe(e=>{if(this.selected=!1,e.length>0)for(const i of e)if(i.id===this.opinion.id){this.selected=!0;break}}),this._opinionService.onLabelsChanged.pipe(Object(I.a)(this._unsubscribeAll)).subscribe(e=>{this.labels=e})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}onSelectedChange(){console.log("Se llama"),this._opinionService.toggleSelectedOpinion(this.opinion.id)}toggleStar(e){e.stopPropagation()}toggleImportant(e){e.stopPropagation()}}return e.\u0275fac=function(i){return new(i||e)(L.Tb(E))},e.\u0275cmp=L.Nb({type:e,selectors:[["opinion-list-item"]],hostVars:2,hostBindings:function(e,i){2&e&&L.Jb("selected",i.selected)},inputs:{opinion:"opinion"},decls:22,vars:12,consts:[["fxLayout","row","fxLayoutAlign","start center"],[3,"ngModel","ngModelChange","click"],["fxFlex","","FlexLayout","column",1,"info"],["fxLayout","row","fxLayoutAlign","start center",1,"row-1"],["fxLayout","row","fxLayoutAlign","start center","fxFlex","",1,"name"],[1,"text-truncate"],[1,"time"],["fxLayout","row","fxLayoutAlign","start center",1,"row-2"],["fxLayout","column","fxLayoutAlign","start start"],[1,"subject","text-truncate"],["class","message text-truncate",4,"ngIf"],["fxLayout","row wrap","fxHide","","fxShow.gt-sm","",1,"labels"],["fxLayout","row","fxLayoutAlign","start center",1,"label"],[1,"label-color",3,"ngStyle"],[1,"label-title"],[1,"message","text-truncate"]],template:function(e,i){1&e&&(L.Zb(0,"div",0),L.Zb(1,"mat-checkbox",1),L.hc("ngModelChange",(function(e){return i.selected=e}))("ngModelChange",(function(e){return i.onSelectedChange()}))("click",(function(e){return e.stopPropagation()})),L.Yb(),L.Zb(2,"div",2),L.Zb(3,"div",3),L.Zb(4,"div",4),L.Zb(5,"span",5),L.Nc(6),L.Yb(),L.Yb(),L.Zb(7,"div",0),L.Zb(8,"div",6),L.Nc(9),L.mc(10,"date"),L.Yb(),L.Yb(),L.Yb(),L.Zb(11,"div",7),L.Zb(12,"div",8),L.Zb(13,"div",9),L.Nc(14),L.Yb(),L.Lc(15,le,4,8,"div",10),L.Zb(16,"div",11),L.Zb(17,"div",12),L.Ub(18,"div",13),L.Zb(19,"div",14),L.Zb(20,"strong"),L.Nc(21),L.Yb(),L.Yb(),L.Yb(),L.Yb(),L.Yb(),L.Yb(),L.Yb(),L.Yb()),2&e&&(L.Fb(1),L.sc("ngModel",i.selected),L.Fb(5),L.Oc(i.opinion.userend.name_alias),L.Fb(3),L.Oc(L.oc(10,7,i.opinion.fecha,"MMM d, y")),L.Fb(5),L.Pc(" ",i.opinion.userend.email," "),L.Fb(1),L.sc("ngIf",null==i.opinion?null:i.opinion.texto),L.Fb(3),L.sc("ngStyle",L.vc(10,pe,i.opinion.polarityColor)),L.Fb(3),L.Oc(i.opinion.polaridad))},directives:[V.c,V.b,a.a,F.o,F.r,V.a,$.t,J.b,$.w,J.c],pipes:[$.f,$.E,ce.a],styles:["opinion-list-item{flex-shrink:0;position:relative;padding:16px 24px;border-bottom:1px solid;cursor:pointer}opinion-list-item.unread .info .name,opinion-list-item.unread .info .row-2 .subject{font-weight:700}opinion-list-item .info{overflow:hidden;width:0;margin-left:16px;position:relative}opinion-list-item .info .row-1{margin-bottom:8px}opinion-list-item .info .row-1 .name{font-size:15px;font-weight:600}opinion-list-item .info .row-1 .name .avatar{min-width:32px;width:32px;height:32px;line-height:32px}opinion-list-item .info .row-1 .actions{margin-left:4px}opinion-list-item .info .row-1 .actions .mat-icon-button{width:32px;height:32px;line-height:1}opinion-list-item .info .row-2 .message,opinion-list-item .info .row-2 .subject{width:100%}opinion-list-item .info .row-2 .message{position:relative}opinion-list-item .info .row-2 .labels{margin-top:8px}opinion-list-item .info .row-2 .labels .label{font-size:11px;border-radius:4px;margin:0 4px 0 0;padding:3px 8px;background-color:rgba(0,0,0,.08)}opinion-list-item .info .row-2 .labels .label .label-color{width:8px;height:8px;margin-right:8px;border-radius:50%}"],encapsulation:2}),e})();function be(e,i){1&e&&(L.Zb(0,"div",5),L.Zb(1,"span",6),L.Nc(2),L.mc(3,"translate"),L.Yb(),L.Yb()),2&e&&(L.Fb(2),L.Oc(L.nc(3,1,"OPINION.NO_MESSAGES")))}const he=function(e){return{"current-opinion":e}},ue=function(){return{y:"100%"}},ge=function(e){return{value:"*",params:e}};function me(e,i){if(1&e){const e=L.ac();L.Zb(0,"opinion-list-item",7),L.hc("click",(function(t){L.Dc(e);const n=i.$implicit;return L.lc().readOpinion(n.id)})),L.Yb()}if(2&e){const e=i.$implicit,t=L.lc();L.sc("opinion",e)("ngClass",L.vc(3,he,(null==e?null:e.id)==(null==t.currentOpinion?null:t.currentOpinion.id)))("@animate",L.vc(6,ge,L.uc(5,ue)))}}const fe=function(){return{value:"50"}},xe=function(){return[5,10,25,100]};let ve=(()=>{class e{constructor(e,i,t,n){this._activatedRoute=e,this._opinionService=i,this._location=t,this.router=n,this.pagesSize=0,this.pageSize=10,this.pageIndex=0,this._unsubscribeAll=new Z.a}ngOnInit(){this._opinionService.onOpinionsTotalOfCampChanged.pipe(Object(I.a)(this._unsubscribeAll)).subscribe(e=>{this.pagesSize=e}),this._opinionService.onOpinionsChanged.pipe(Object(I.a)(this._unsubscribeAll)).subscribe(e=>{console.log("Opiniones ",e),this.opinions=e}),this._opinionService.onCurrentOpinionChanged.pipe(Object(I.a)(this._unsubscribeAll)).subscribe(e=>{if(e)this.currentOpinion=e;else{this.currentOpinion=null;const e=this._activatedRoute.snapshot.params.labelHandle,i=this._activatedRoute.snapshot.params.filterHandle,t=this._activatedRoute.snapshot.params.folderHandle;this._location.go(e?"apps/opinionMailbox/label/"+e:i?"apps/opinionMailbox/filter/"+i:"apps/opinionMailbox/"+t)}}),this.paginator.page.pipe(Object(I.a)(this._unsubscribeAll)).subscribe(e=>{this._opinionService.onPageChanched.next({pageIndex:e.pageIndex,pageSize:e.pageSize}),this._opinionService.getOpinions(e.pageIndex,e.pageSize)})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}readOpinion(e){const i=this._activatedRoute.snapshot.params.labelHandle,t=this._activatedRoute.snapshot.params.filterHandle;this._location.go(i?"apps/opinionMailbox/label/"+i+"/"+e:t?"apps/opinionMailbox/filter/"+t+"/"+e:"apps/opinionMailbox/"+this._activatedRoute.snapshot.params.folderHandle+"/"+e),this._opinionService.setCurrentOpinion(e)}}return e.\u0275fac=function(i){return new(i||e)(L.Tb(n.a),L.Tb(E),L.Tb($.n),L.Tb(n.g))},e.\u0275cmp=L.Nb({type:e,selectors:[["mailbox-list"]],viewQuery:function(e,i){var t;1&e&&L.Jc(x.a,!0),2&e&&L.yc(t=L.ic())&&(i.paginator=t.first)},decls:5,vars:9,consts:[["fxLayout","column","fxLayoutAlign","center center","fxFlexFill","",4,"ngIf"],[1,"opinion-list"],[3,"opinion","ngClass","click",4,"ngFor","ngForOf"],[3,"length","pageIndex","pageSize","pageSizeOptions"],["paginator",""],["fxLayout","column","fxLayoutAlign","center center","fxFlexFill",""],[1,"no-messages-text","hint-text"],[3,"opinion","ngClass","click"]],template:function(e,i){1&e&&(L.Lc(0,be,4,3,"div",0),L.Zb(1,"div",1),L.Lc(2,me,1,8,"opinion-list-item",2),L.Ub(3,"mat-paginator",3,4),L.Yb()),2&e&&(L.sc("ngIf",0===i.opinions.length),L.Fb(1),L.sc("@animateStagger",L.uc(7,fe)),L.Fb(1),L.sc("ngForOf",i.opinions),L.Fb(1),L.sc("length",i.pagesSize)("pageIndex",0)("pageSize",10)("pageSizeOptions",L.uc(8,xe)))},directives:[$.t,$.s,x.a,V.c,V.b,V.d,de,$.q,J.a],pipes:[f.c],styles:["mailbox-list{position:relative;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-flex:1;flex:1;padding:0;border-right:1px solid;overflow-y:auto;-webkit-overflow-scrolling:touch}mailbox-list .no-messages-text{font-size:24px;font-weight:300}mailbox-list .opinion-list{position:relative;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-flex:1;flex:1}"],encapsulation:2,data:{animation:U.a}}),e})();var Oe=t("vfyW"),Se=t("lUmN"),_e=t("ERl3"),we=t("jyOd");const Ce=["opiniontxt"],Ae=["filter"],Le=function(){return{delay:"300ms",scale:"0.2"}},ye=function(e){return{value:"*",params:e}},Ye=function(){return{delay:"400ms"}};function Ee(e,i){1&e&&(L.Zb(0,"div",37),L.Zb(1,"mat-icon",38),L.Nc(2," email "),L.Yb(),L.Zb(3,"span",39),L.Zb(4,"span"),L.Nc(5),L.mc(6,"translate"),L.Yb(),L.Yb(),L.Yb()),2&e&&(L.Fb(1),L.sc("@animate",L.vc(6,ye,L.uc(5,Le))),L.Fb(2),L.sc("@animate",L.vc(9,ye,L.uc(8,Ye))),L.Fb(2),L.Oc(L.nc(6,3,"OPINION.SELECT_A_MESSAGE_TO_READ")))}const Fe=function(e){return{"background-color":e}};function Ze(e,i){if(1&e&&(L.Zb(0,"div",40),L.Zb(1,"div",41),L.Ub(2,"div",42),L.Zb(3,"div",43),L.Zb(4,"strong"),L.Nc(5),L.Yb(),L.Yb(),L.Yb(),L.Yb()),2&e){const e=L.lc();L.Fb(2),L.sc("ngStyle",L.vc(2,Fe,e.opinion.polarityColor)),L.Fb(3),L.Oc(e.opinion.polaridad)}}function Ie(e,i){1&e&&(L.Zb(0,"span"),L.Zb(1,"h3"),L.Nc(2,"Show Details"),L.Yb(),L.Yb())}function Te(e,i){1&e&&(L.Zb(0,"span"),L.Zb(1,"h3"),L.Nc(2,"Details"),L.Yb(),L.Yb())}function Ne(e,i){if(1&e&&(L.Zb(0,"span",47),L.Nc(1),L.mc(2,"date"),L.Yb()),2&e){const e=L.lc(2);L.Fb(1),L.Oc(L.oc(2,1,e.opinion.fecha,"MMM d, y"))}}function ke(e,i){if(1&e&&(L.Zb(0,"div",44),L.Zb(1,"div",45),L.Zb(2,"span",46),L.Nc(3,"Polaridad:"),L.Yb(),L.Zb(4,"span",46),L.Nc(5,"Fecha:"),L.Yb(),L.Yb(),L.Zb(6,"div",45),L.Zb(7,"span",47),L.Nc(8),L.Yb(),L.Lc(9,Ne,3,4,"span",48),L.Yb(),L.Yb()),2&e){const e=L.lc();L.Fb(8),L.Oc(e.opinion?e.opinion.polaridad:""),L.Fb(1),L.sc("ngIf",e.opinion)}}function Pe(e,i){1&e&&(L.Zb(0,"mat-header-cell",49),L.Nc(1,"No"),L.Yb())}function De(e,i){if(1&e){const e=L.ac();L.Zb(0,"mat-cell"),L.Zb(1,"mat-checkbox",50),L.hc("click",(function(i){return L.Dc(e),i.stopPropagation()})),L.Yb(),L.Yb()}}function Re(e,i){1&e&&(L.Zb(0,"mat-header-cell",49),L.Nc(1),L.mc(2,"translate"),L.Yb()),2&e&&(L.Fb(1),L.Oc(L.nc(2,1,"OPINION.ASPECT")))}function Me(e,i){if(1&e&&(L.Zb(0,"mat-cell"),L.Zb(1,"p",51),L.Nc(2),L.Yb(),L.Yb()),2&e){const e=i.$implicit;L.Fb(2),L.Pc(" ",e.texto," ")}}function He(e,i){1&e&&(L.Zb(0,"mat-header-cell",49),L.Nc(1),L.mc(2,"translate"),L.Yb()),2&e&&(L.Fb(1),L.Oc(L.nc(2,1,"OPINION.POLARITY")))}function je(e,i){if(1&e&&(L.Zb(0,"mat-cell"),L.Zb(1,"p",52),L.Nc(2),L.Yb(),L.Yb()),2&e){const e=i.$implicit;L.Fb(2),L.Pc(" ",e.polaridad," ")}}function ze(e,i){1&e&&L.Ub(0,"mat-header-row")}function Ue(e,i){if(1&e){const e=L.ac();L.Zb(0,"mat-row",53),L.hc("click",(function(t){L.Dc(e);const n=i.$implicit;return L.lc().onShowAspect(n)})),L.Yb()}}const Be=function(){return{value:"50"}},Ge=function(){return[5,10,25,100]};let Ve=(()=>{class e{constructor(e,i,t,n,o){this._opinionService=e,this._fuseTranslationLoaderService=i,this._ecommerceOrdersService=t,this._pruebaServOpin=n,this.router=o,this.opinion=void 0,this.displayedColumns=["id","aspects","polarity"],this.selected=!0,this.pagesize=0,this.index=0,this.selectedCamapaign="",this.showDetails=!1,this._unsubscribeAll=new Z.a,this._fuseTranslationLoaderService.loadTranslations(k,P,B)}ngOnInit(){console.log("ESTOO "+this.pruebas),this.dataSource=new qe(this._ecommerceOrdersService,this._pruebaServOpin,this.paginatorDetails,this.sort),this._opinionService.onCurrentOpinionChanged.pipe(Object(I.a)(this._unsubscribeAll)).subscribe(e=>{this.index=0,this.opinion=e,this.opinion&&this._pruebaServOpin.getAspectOpin(this.paginatorDetails.pageIndex,this.paginatorDetails.pageSize).then(e=>{console.log("Data Aspect Opinion",e),void 0!==e&&(this.prueba3=e.data),console.log("Is paginator ",this.sort)}).catch(e=>{console.log(e)}),this.dataSource.getAspects("0","10")}),this._opinionService.onAspectsTotalOfOpinionChanged.pipe(Object(I.a)(this._unsubscribeAll)).subscribe(e=>{this.pagesize=e}),this._opinionService.onOpinionSelected.pipe(Object(I.a)(this._unsubscribeAll)).subscribe(e=>{this.selected=e}),this._opinionService.onLabelsChanged.pipe(Object(I.a)(this._unsubscribeAll)).subscribe(e=>{this.labels=e})}ngAfterViewInit(){this.sort.sortChange.subscribe(e=>{this.criteria=e.active+" "+e.direction}),Object(_e.a)(this.sort.sortChange,this.paginatorDetails.page).pipe(Object(I.a)(this._unsubscribeAll),Object(Oe.a)(()=>{this.dataSource.getAspects(this.paginatorDetails.pageIndex,this.paginatorDetails.pageSize)})).subscribe()}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}toggleStar(e){e.stopPropagation(),this._opinionService.updateOpinion(this.opinion)}toggleImportant(e){e.stopPropagation(),this._opinionService.updateOpinion(this.opinion)}onShowAspect(e){var i=this.opinion.texto.slice(e.start,e.end);let t;switch(console.log(e),e.polaridad){case"positive":case"positiva":t=i.fontcolor("#03a9f4");break;case"neutra":t=i.fontcolor("brown");break;case"negative":case"negativa":t=i.fontcolor("red")}let n=this.opinion.texto.slice(0,e.start),o=this.opinion.texto.slice(e.end,this.opinion.texto.length-1);this.opiniontxt.nativeElement.innerHTML=n+"<strong>"+t+"</strong>"+o,console.log(this.opiniontxt.nativeElement)}}return e.\u0275fac=function(i){return new(i||e)(L.Tb(E),L.Tb(R.a),L.Tb(we.a),L.Tb(E),L.Tb(n.a))},e.\u0275cmp=L.Nb({type:e,selectors:[["opinion-details"]],viewQuery:function(e,i){var t;1&e&&(L.Jc(x.a,!0),L.Sc(Ce,!0),L.Jc(Ae,!0),L.Jc(m.a,!0)),2&e&&(L.yc(t=L.ic())&&(i.paginatorDetails=t.first),L.yc(t=L.ic())&&(i.opiniontxt=t.first),L.yc(t=L.ic())&&(i.filter=t.first),L.yc(t=L.ic())&&(i.sort=t.first))},decls:54,vars:21,consts:[["fxLayout","column","fxLayoutAlign","center center","fxFlex","",4,"ngIf"],[1,"content"],["fxLayout","row"],["fxFlex","100%",3,"hidden"],["fxLayout","row","fxLayoutAlign","space-between center",1,"opinion-header"],[1,"name","subject"],["class","labels","fxLayout","row wrap","fxHide","","fxShow.gt-sm","",4,"ngIf"],["fxLayout","row","fxLayoutAlign","start center",1,"actions"],["mat-icon-button",""],[1,"secondary-text"],["mat-icon-button","","aria-label","Toggle star",3,"click"],["mat-icon-button","","aria-label","Toggle important",3,"click"],[1,"red-fg"],[1,"opinion-content"],["fxLayout","row","fxLayoutAlign","space-between start",1,"info"],["fxFlex","","fxLayout","column","fxLayoutAlign","start start"],["fxLayout","row","fxLayoutAlign","start start"],["fxLayout","column","fxLayoutAlign","start start"],["fxLayout","row","fxLayoutAlign","start center",1,"to"],[1,"to-text"],[1,"toggle-details",3,"click"],[4,"ngIf"],["class","details","fxLayout","row","fxLayoutAlign","start start",4,"ngIf"],[3,"innerHTML"],["opiniontxt",""],["fxFlex","100%",1,"content-card",3,"hidden"],["matSort","","fusePerfectScrollbar","",1,"orders-table",3,"dataSource"],["table",""],["matColumnDef","id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","aspects"],["matColumnDef","polarity"],[4,"matHeaderRowDef","matHeaderRowDefSticky"],["class","order","matRipple","",3,"click",4,"matRowDef","matRowDefColumns"],[3,"length","pageIndex","pageSize","pageSizeOptions"],["paginatorDetails",""],["fxLayout","column","fxLayoutAlign","center center","fxFlex",""],[1,"s-128","mb-16","select-message-icon","hint-text"],[1,"select-message-text","hint-text"],["fxLayout","row wrap","fxHide","","fxShow.gt-sm","",1,"labels"],["fxLayout","row","fxLayoutAlign","start center",1,"label"],[1,"label-color",3,"ngStyle"],[1,"label-title"],["fxLayout","row","fxLayoutAlign","start start",1,"details"],["fxLayout","column"],[1,"title"],[1,"detail"],["class","detail",4,"ngIf"],["mat-sort-header",""],[3,"click"],[1,"text-truncate"],[1,"status","text-truncate","h6","p-4"],["matRipple","",1,"order",3,"click"]],template:function(e,i){1&e&&(L.Lc(0,Ee,7,11,"div",0),L.Zb(1,"div",1),L.Zb(2,"div",2),L.Zb(3,"div",3),L.Zb(4,"div",4),L.Zb(5,"div"),L.Zb(6,"div",5),L.Zb(7,"h2"),L.Nc(8),L.Yb(),L.Yb(),L.Lc(9,Ze,6,4,"div",6),L.Yb(),L.Zb(10,"div",7),L.Zb(11,"button",8),L.Zb(12,"mat-icon",9),L.Nc(13,"print"),L.Yb(),L.Yb(),L.Zb(14,"button",10),L.hc("click",(function(e){return i.toggleStar(e)})),L.Zb(15,"mat-icon",9),L.Nc(16,"star_border"),L.Yb(),L.Yb(),L.Zb(17,"button",11),L.hc("click",(function(e){return i.toggleImportant(e)})),L.Zb(18,"mat-icon",12),L.Nc(19,"label"),L.Yb(),L.Yb(),L.Yb(),L.Yb(),L.Zb(20,"div",13),L.Zb(21,"div",14),L.Zb(22,"div",15),L.Zb(23,"div",16),L.Zb(24,"div",17),L.Zb(25,"div",18),L.Zb(26,"div",19),L.Nc(27,"to"),L.Yb(),L.Zb(28,"div"),L.Nc(29),L.Yb(),L.Yb(),L.Yb(),L.Yb(),L.Zb(30,"a",20),L.hc("click",(function(e){return i.showDetails=!i.showDetails})),L.Lc(31,Ie,3,0,"span",21),L.Lc(32,Te,3,0,"span",21),L.Yb(),L.Lc(33,ke,10,2,"div",22),L.Yb(),L.Yb(),L.Zb(34,"div"),L.Ub(35,"h4",23,24),L.Yb(),L.Yb(),L.Yb(),L.Yb(),L.Zb(37,"div",2),L.Zb(38,"div",25),L.Zb(39,"mat-table",26,27),L.Xb(41,28),L.Lc(42,Pe,2,0,"mat-header-cell",29),L.Lc(43,De,2,0,"mat-cell",30),L.Wb(),L.Xb(44,31),L.Lc(45,Re,3,3,"mat-header-cell",29),L.Lc(46,Me,3,1,"mat-cell",30),L.Wb(),L.Xb(47,32),L.Lc(48,He,3,3,"mat-header-cell",29),L.Lc(49,je,3,1,"mat-cell",30),L.Wb(),L.Lc(50,ze,1,0,"mat-header-row",33),L.Lc(51,Ue,1,0,"mat-row",34),L.Yb(),L.Ub(52,"mat-paginator",35,36),L.Yb(),L.Yb(),L.Yb()),2&e&&(L.sc("ngIf",!i.opinion),L.Fb(3),L.sc("hidden",!i.opinion),L.Fb(5),L.Oc(i.opinion?i.opinion.userend.name_alias:""),L.Fb(1),L.sc("ngIf",i.opinion),L.Fb(20),L.Oc(i.opinion?i.opinion.userend.email:""),L.Fb(2),L.sc("ngIf",!i.showDetails),L.Fb(1),L.sc("ngIf",i.showDetails),L.Fb(1),L.sc("ngIf",i.showDetails),L.Fb(2),L.sc("innerHTML",i.opinion?i.opinion.texto:"",L.Ec),L.Fb(3),L.sc("hidden",!i.opinion),L.Fb(1),L.sc("dataSource",i.dataSource)("@animateStagger",L.uc(19,Be)),L.Fb(11),L.sc("matHeaderRowDef",i.displayedColumns)("matHeaderRowDefSticky",!0),L.Fb(1),L.sc("matRowDefColumns",i.displayedColumns),L.Fb(1),L.sc("length",i.dataSource._countAspects)("pageIndex",0)("pageSize",10)("pageSizeOptions",L.uc(20,Ge)))},directives:[$.t,V.c,V.a,V.b,o.b,l.a,u.j,m.a,q.a,u.c,u.e,u.b,u.g,u.i,x.a,J.b,$.w,J.c,u.d,m.b,u.a,a.a,u.f,u.h,s.r],pipes:[f.c,$.f],styles:["opinion-details{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-flex:1;flex:1;padding:12px;overflow-y:auto;-webkit-overflow-scrolling:touch}opinion-details .select-message-text{font-size:24px;font-weight:300}opinion-details .opinion-header{padding-bottom:16px;border-bottom:1px solid}opinion-details .opinion-header .actions{min-width:88px}opinion-details .opinion-header .subject{font-size:17px;font-weight:600}opinion-details .opinion-header .label{font-size:11px;border-radius:4px;margin:4px 4px 4px 0;padding:3px 8px}opinion-details .opinion-header .label .label-color{width:8px;height:8px;margin-right:8px;border-radius:50%}opinion-details .opinion-content{padding:12px 0}opinion-details .opinion-content .to .to-text{margin-right:4px;text-transform:lowercase}opinion-details .opinion-content .info{padding-bottom:16px}opinion-details .opinion-content .info .avatar{margin-right:16px}opinion-details .opinion-content .info .name{margin-right:8px;font-weight:600}opinion-details .opinion-content .info .toggle-details{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;text-decoration:underline;padding-top:16px;cursor:pointer;font-weight:600}opinion-details .opinion-content .info .details{padding-top:8px}opinion-details .opinion-content .info .details .title{font-weight:600;margin-right:6px}opinion-details .opinion-attachments{padding:24px 0;border-top:1px solid}opinion-details .opinion-attachments .title{margin-bottom:16px;font-weight:600}opinion-details .opinion-attachments .attachment .preview{width:100px;margin:0 16px 8px 0;border-radius:4px}opinion-details .opinion-attachments .attachment .link{margin-bottom:2px}opinion-details .opinion-attachments .attachment .size{font-size:11px}opinion-details .orders-table{-webkit-box-flex:1;flex:1 1 auto;border-bottom:1px solid rgba(0,0,0,.12);overflow:auto;-webkit-overflow-scrolling:touch}opinion-details .orders-table .mat-header-row{min-height:64px}opinion-details .orders-table .order{position:relative;cursor:pointer;height:84px}opinion-details .orders-table .mat-cell{min-width:0;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}opinion-details .orders-table .mat-column-id,opinion-details .orders-table .mat-column-image{-webkit-box-flex:0;flex:0 1 84px}opinion-details .orders-table .mat-column-image .product-image{width:52px;height:52px;border:1px solid rgba(0,0,0,.12)}opinion-details .orders-table .mat-column-buttons{-webkit-box-flex:0;flex:0 1 80px}opinion-details .orders-table .quantity-indicator{display:inline-block;vertical-align:middle;width:8px;height:8px;border-radius:4px;margin-right:8px}opinion-details .orders-table .quantity-indicator+span{display:inline-block;vertical-align:middle}opinion-details .orders-table .active-icon{border-radius:50%}"],encapsulation:2,data:{animation:U.a}}),e})();class qe extends Se.b{constructor(e,i,t,n){super(),this._ecommerceOrdersService=e,this._opinionServ=i,this._matPaginator=t,this._matSort=n,this._filterChange=new _.a(""),this._filteredDataChange=new _.a(""),this._aspectsChange=new _.a([]),this._countAspects=0,this.filteredData=this._ecommerceOrdersService.orders,this._opinionServ.onAspectsTotalOfOpinionChanged.subscribe(e=>{this._countAspects=e})}get filteredData(){return this._filteredDataChange.value}set filteredData(e){console.log(e),this._filteredDataChange.next(e)}get filter(){return this._filterChange.value}set filter(e){this._filterChange.next(e)}connect(){return this._aspectsChange.asObservable()}filterData(e){return this.filter?w.a.filterArrayByString(e,this.filter):e}sortData(e){return this._matSort.active&&""!==this._matSort.direction?e.sort((e,i)=>{let t="",n="";switch(this._matSort.active){case"id":[t,n]=[e.id,i.id];break;case"aspects":[t,n]=[e.texto,i.texto];break;case"polarity":[t,n]=[e.polaridad,i.polaridad]}return((isNaN(+t)?t:+t)<(isNaN(+n)?n:+n)?-1:1)*("asc"===this._matSort.direction?1:-1)}):e}disconnect(){this._aspectsChange.complete()}getAspects(e,i){this._opinionServ.getAspectOpin(e,i).then(e=>{this._aspectsChange.next(e)})}}function Je(e,i){1&e&&L.Ub(0,"div",23)}function $e(e,i){if(1&e){const e=L.ac();L.Zb(0,"button",24),L.hc("click",(function(i){return L.Dc(e),L.lc().setFolderOnSelectedOpinions(4)})),L.Zb(1,"mat-icon",8),L.Nc(2,"delete"),L.Yb(),L.Yb()}}function We(e,i){1&e&&(L.Zb(0,"button",25),L.Zb(1,"mat-icon",8),L.Nc(2,"print"),L.Yb(),L.Yb())}function Xe(e,i){if(1&e){const e=L.ac();L.Zb(0,"div",26),L.Zb(1,"button",24),L.hc("click",(function(i){return L.Dc(e),L.lc().deselectCurrentOpinion()})),L.Zb(2,"mat-icon",8),L.Nc(3,"arrow_back"),L.Yb(),L.Yb(),L.Yb()}}const Ke=function(e){return{"current-mailbox-selected":e}};let Qe=(()=>{class e{constructor(e,i,t,n,o,a){this._opinionService=e,this._fuseSidebarService=i,this._fuseTranslationLoaderService=t,this._camapignService=n,this._userService=o,this._estadPrueba=a,this.showOpinionList=!0,this._fuseTranslationLoaderService.loadTranslations(k,P),this.searchInput=new F.d(""),this._unsubscribeAll=new Z.a}ngOnInit(){this._opinionService.onSelectedOpinionsChanged.pipe(Object(I.a)(this._unsubscribeAll)).subscribe(e=>{setTimeout(()=>{this.hasSelectedOpinions=e.length>0,this.isIndeterminate=e.length!==this._opinionService.opinions.length&&e.length>0},0)}),this._opinionService.onFiltersChanged.pipe(Object(I.a)(this._unsubscribeAll)).subscribe(e=>{this.filters=this._opinionService.filters}),this._opinionService.onCurrentOpinionChanged.pipe(Object(I.a)(this._unsubscribeAll)).subscribe(e=>{this.currentOpinion=e||null}),this.searchInput.valueChanges.pipe(Object(I.a)(this._unsubscribeAll),Object(T.a)(300),Object(N.a)()).subscribe(e=>{this._opinionService.onSearchTextChanged.next(e)}),this._camapignService.getCampaignbyUser("0","","","")}ngOnDestroy(){this._opinionService.toggleSelectAll()}selectOpinions(e,i){this._opinionService.selectOpinions(e,i)}deselectOpinions(){this._opinionService.deselectOpinions()}deselectCurrentOpinion(){this._opinionService.onCurrentOpinionChanged.next(null)}setFolderOnSelectedOpinions(e){this._opinionService.setFolderOnSelectedOpinions(e)}toggleSidebar(e){this._fuseSidebarService.getSidebar(e).toggleOpen()}toggleSelectAll(){}}return e.\u0275fac=function(i){return new(i||e)(L.Tb(E),L.Tb(D.a),L.Tb(R.a),L.Tb(y.a),L.Tb(M.a),L.Tb(H.a))},e.\u0275cmp=L.Nb({type:e,selectors:[["opinion"]],decls:37,vars:14,consts:[["id","opinion",1,"page-layout","carded","left-sidebar","inner-scroll"],[1,"top-bg","accent"],["name","box-main-sidebar","position","left","lockedOpen","gt-md",1,"sidebar"],[1,"center"],["fxLayout","row","fxLayoutAlign","start center",1,"header"],["fxFlex","","fxLayout","row","fxLayoutAlign","start center",1,"search-wrapper"],["mat-icon-button","","fxHide.gt-md","",1,"sidebar-toggle",3,"click"],["fxLayout","row","fxLayoutAlign","start center",1,"search"],[1,"secondary-text"],["fxFlex","",3,"formControl","placeholder"],[1,"content-card",3,"ngClass"],[1,"toolbar","px-24","py-8"],["fxFlex","row","fxLayoutAlign","start center",1,"mailbox-selection"],[3,"checked","indeterminate","click"],["mat-icon-button","",3,"matMenuTriggerFor"],["selectMenu","matMenu"],["mat-menu-item","",3,"click"],["class","toolbar-separator",4,"ngIf"],["mat-icon-button","",3,"click",4,"ngIf"],["mat-icon-button","",4,"ngIf"],["fxHide.gt-xs","",4,"ngIf"],["fxLayout","row",1,"content"],["fusePerfectScrollbar","","fxFlex",""],[1,"toolbar-separator"],["mat-icon-button","",3,"click"],["mat-icon-button",""],["fxHide.gt-xs",""]],template:function(e,i){if(1&e&&(L.Zb(0,"div",0),L.Ub(1,"div",1),L.Zb(2,"fuse-sidebar",2),L.Ub(3,"mailbox-main-sidebar"),L.Yb(),L.Zb(4,"div",3),L.Zb(5,"div",4),L.Zb(6,"div",5),L.Zb(7,"button",6),L.hc("click",(function(e){return i.toggleSidebar("mailbox-main-sidebar")})),L.Zb(8,"mat-icon"),L.Nc(9,"menu"),L.Yb(),L.Yb(),L.Zb(10,"div",7),L.Zb(11,"mat-icon",8),L.Nc(12,"search"),L.Yb(),L.Ub(13,"input",9),L.mc(14,"translate"),L.Yb(),L.Yb(),L.Yb(),L.Zb(15,"div",10),L.Zb(16,"div",11),L.Zb(17,"div",12),L.Zb(18,"mat-checkbox",13),L.hc("click",(function(e){return i.toggleSelectAll()})),L.Yb(),L.Zb(19,"button",14),L.Zb(20,"mat-icon"),L.Nc(21,"arrow_drop_down"),L.Yb(),L.Yb(),L.Zb(22,"mat-menu",null,15),L.Zb(24,"button",16),L.hc("click",(function(e){return i.selectOpinions()})),L.Nc(25,"All"),L.Yb(),L.Zb(26,"button",16),L.hc("click",(function(e){return i.deselectOpinions()})),L.Nc(27,"None"),L.Yb(),L.Zb(28,"button",16),L.hc("click",(function(e){return i.selectOpinions("read",!0)})),L.Nc(29,"Read"),L.Yb(),L.Yb(),L.Lc(30,Je,1,0,"div",17),L.Lc(31,$e,3,0,"button",18),L.Lc(32,We,3,0,"button",19),L.Yb(),L.Lc(33,Xe,4,0,"div",20),L.Yb(),L.Zb(34,"div",21),L.Ub(35,"mailbox-list",22),L.Ub(36,"opinion-details",22),L.Yb(),L.Yb(),L.Yb(),L.Yb()),2&e){const e=L.zc(23);L.Fb(13),L.sc("formControl",i.searchInput)("placeholder",L.nc(14,10,"SEARCH")),L.Fb(2),L.sc("ngClass",L.vc(12,Ke,i.currentOpinion)),L.Fb(3),L.sc("checked",i.hasSelectedOpinions)("indeterminate",i.isIndeterminate),L.Fb(1),L.sc("matMenuTriggerFor",e),L.Fb(11),L.sc("ngIf",i.hasSelectedOpinions),L.Fb(1),L.sc("ngIf",i.hasSelectedOpinions),L.Fb(1),L.sc("ngIf",i.hasSelectedOpinions),L.Fb(1),L.sc("ngIf",i.currentOpinion)}},directives:[j.a,z.a,re,V.c,V.b,V.a,o.b,J.b,l.a,F.b,F.o,F.e,$.q,J.a,a.a,d.c,d.d,d.a,$.t,ve,q.a,Ve],pipes:[f.c],styles:["opinion{width:100%}opinion .center .header .search-wrapper{border-radius:28px;overflow:hidden;box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12)}opinion .center .header .search-wrapper .sidebar-toggle{margin:0 0 0 6px;width:56px;height:56px;border-radius:0;border-right:1px solid}opinion .center .header .search-wrapper .search{width:100%;height:56px;line-height:56px;padding:0 18px}opinion .center .header .search-wrapper .search input{height:56px;min-height:56px;max-height:56px;padding:0 16px;border:none;outline:none}opinion .center .content-card .toolbar .toolbar-separator{height:32px;width:1px;margin:0 12px}@media screen and (max-width:599px){opinion .center .content-card mailbox-list{border-right:none}opinion .center .content-card mailbox-details,opinion .center .content-card mailbox-list{-webkit-box-flex:1;flex:1 0 100%}opinion .center .content-card mail-details{display:none!important}opinion .center .content-card.current-mailbox-selected .toolbar{padding-left:16px!important}opinion .center .content-card.current-mailbox-selected .content mailbox-list,opinion .center .content-card.current-mailbox-selected .toolbar .mailbox-selection{display:none!important}opinion .center .content-card.current-mailbox-selected .content mailbox-details{display:-webkit-box!important;display:flex!important}}"],encapsulation:2}),e})();var ei=t("oof0"),ii=t("CaZ3");t.d(i,"OpinionModule",(function(){return ni}));const ti=[{path:"label/:labelHandle",component:Qe,canActivate:[ei.a],resolve:{opinion:E,data:we.a}},{path:"paginate/:pageIndex/:pageSize",component:Qe,canActivate:[ei.a],resolve:{opinion:E,data:we.a}},{path:"label/:labelHandle/:opinionId",component:Qe,canActivate:[ei.a],resolve:{opinion:E,data:we.a}},{path:"filter/:filterHandle",component:Qe,canActivate:[ei.a],resolve:{opinion:E,data:we.a}},{path:"filter/:filterHandle/:opinionId",component:Qe,canActivate:[ei.a],resolve:{opinion:E,data:we.a}},{path:":folderHandle",component:Qe,canActivate:[ei.a],resolve:{opinion:E,data:we.a}},{path:":folderHandle/:opinionId",component:Qe,canActivate:[ei.a],resolve:{opinion:E,data:we.a}},{path:"**",canActivate:[ei.a],redirectTo:"inbox"}];let ni=(()=>{class e{}return e.\u0275mod=L.Rb({type:e}),e.\u0275inj=L.Qb({factory:function(i){return new(i||e)},providers:[E,we.a],imports:[[n.k.forChild(ti),o.c,a.b,r.e,c.d,l.b,p.c,d.b,s.s,b.b,h.b,x.b,u.k,g.c,m.c,f.b,v.a,O.f,ii.a]]}),e})()},oof0:function(e,i,t){"use strict";t.d(i,"a",(function(){return l}));var n=t("rGjz"),o=t.n(n),a=t("Ub9n"),s=t("vZS0"),r=t("DviW"),c=t("Fk62");let l=(()=>{class e{constructor(e,i,t){this.sharedvar=e,this.userService=i,this.router=t}canActivate(e,i){return!(""===this.sharedvar.getId()||!this.userService.isLoggedIn())||(this.userService.isLoggedOut()?(this.userService.logout(),this.router.navigate(["/auth/login"])):(o.a.fire("Debe seleccionar una Campa\xf1a primero"),this.router.navigate(["/apps/campaign/myCampaigns"])),!1)}}return e.\u0275fac=function(i){return new(i||e)(a.dc(s.a),a.dc(r.a),a.dc(c.g))},e.\u0275prov=a.Pb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);