(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{tC5T:function(t,a,e){"use strict";e.r(a);var i=e("Fk62"),s=e("1xOk"),o=e("CsWY"),n=e("hqWh"),d=e("YLls"),l=e("jHnc"),r=e("RK+r"),c=e("etCK"),b=e("9Yh1"),p=e("Fqe6"),g=e("N2ZZ"),h=e("4YvU"),f=e("OHu/"),u=e("xhB/"),y=e("EYJY"),m=e("G+XH"),w=e("ccoi"),v=e("TiKg"),x=e("Ub9n"),Y=e("zZ4M"),Z=e("MOtY"),C=e("DviW"),k=e("vZS0"),A=e("8VHZ"),S=e("qQg5"),N=e("mcTK"),F=e("Yvf7");function T(t,a){1&t&&(x.Zb(0,"div"),x.Zb(1,"span"),x.Nc(2,"No existen datos"),x.Yb(),x.Yb())}function D(t,a){1&t&&(x.Zb(0,"div"),x.Zb(1,"span"),x.Nc(2,"No existen datos"),x.Yb(),x.Yb())}function L(t,a){1&t&&(x.Zb(0,"div"),x.Zb(1,"span"),x.Nc(2,"No existen datos"),x.Yb(),x.Yb())}function O(t,a){1&t&&(x.Zb(0,"div"),x.Zb(1,"span"),x.Nc(2,"No existen datos"),x.Yb(),x.Yb())}const I=function(t){return{accent:t}};let E=(()=>{class t{constructor(t,a,e,i,s){this._estadPrueba=t,this._camapignService=a,this._userService=e,this.servCamp=i,this._fb=s,this.widget5SelectedDay="Ayer",this.widget2={englishOpin:[{value:[0]}],chartType:"bar",datasets:[{label:"Cantidad",data:[]}],labels:["Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes","S\xe1bado","Domingo"],colors:[{borderColor:"#00008b",backgroundColor:"#00008b"}],options:{spanGaps:!1,legend:{display:!1},maintainAspectRatio:!1,layout:{padding:{top:24,left:16,right:16,bottom:16}},scales:{xAxes:[{display:!1}],yAxes:[{display:!1}]}}},this.widget3={spanishOpin:[{value:[0]}],chartType:"bar",datasets:[{label:"Cantidad",data:[]}],labels:["Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes","S\xe1bado","Domingo"],colors:[{borderColor:"#5c84f1",backgroundColor:"#42a5f5"}],options:{spanGaps:!1,legend:{display:!1},maintainAspectRatio:!1,layout:{padding:{top:24,left:16,right:16,bottom:16}},scales:{xAxes:[{display:!1}],yAxes:[{display:!1}]}}},this.widget4={totalOpin:[{value:[0]}],chartType:"bar",datasets:[{label:"Cantidad",data:[]}],labels:["Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes","S\xe1bado","Domingo"],colors:[{borderColor:"#f44336",backgroundColor:"#f44336"}],options:{spanGaps:!1,legend:{display:!1},maintainAspectRatio:!1,layout:{padding:{top:24,left:16,right:16,bottom:16}},scales:{xAxes:[{display:!1}],yAxes:[{display:!1}]}}},this.widget5={chartType:"line",datasets:{Ayer:[{label:"Ingl\xe9s",data:[190,300,340,220,290,390,250,380,410,380,320,290],fill:"start"},{label:"Espa\xf1ol",data:[2200,2900,3900,2500,3800,3200,2900,1900,3e3,3400,4100,3800],fill:"start"}],Hoy:[{label:"Ingl\xe9s",data:[2200,2900,3900,2500,3800,3200,2900,1900,3e3,3400,4100,3800],fill:"start"},{label:"Espa\xf1ol",data:[190,300,340,220,290,390,250,380,410,380,320,290],fill:"start"}]},labels:["12am","2am","4am","6am","8am","10am","12pm","2pm","4pm","6pm","8pm","10pm"],colors:[{borderColor:"#3949ab",backgroundColor:"#3949ab",pointBackgroundColor:"#3949ab",pointHoverBackgroundColor:"#3949ab",pointBorderColor:"#ffffff",pointHoverBorderColor:"#ffffff"},{borderColor:"rgba(30, 136, 229, 0.87)",backgroundColor:"rgba(30, 136, 229, 0.87)",pointBackgroundColor:"rgba(30, 136, 229, 0.87)",pointHoverBackgroundColor:"rgba(30, 136, 229, 0.87)",pointBorderColor:"#ffffff",pointHoverBorderColor:"#ffffff"}],options:{spanGaps:!1,legend:{display:!1},maintainAspectRatio:!1,tooltips:{position:"nearest",mode:"index",intersect:!1},layout:{padding:{left:24,right:32}},elements:{point:{radius:4,borderWidth:2,hoverRadius:4,hoverBorderWidth:2}},scales:{xAxes:[{gridLines:{display:!1},ticks:{fontColor:"rgba(0,0,0,0.54)"}}],yAxes:[{gridLines:{tickMarkLength:16},ticks:{stepSize:1e3}}]},plugins:{filler:{propagate:!1}}}},this._registerCustomChartJSPlugin(),this._unsubscribeAll=new y.a,this.maxDate=new Date}ngOnInit(){if(""!=this.servCamp.getName()){console.log("CampNAme "+this.servCamp.getName()),this.campaigns=this.servCamp.getName(),console.log(this.campaigns);let t=v().format("YYYY-MM-DD hh:mm a");this.getAllStadisticsFromBackend(t)}this.dateForm=this._fb.group({usertime:[""]})}_registerCustomChartJSPlugin(){window.Chart.plugins.register({afterDatasetsDraw:function(t,a){if(!t.options.plugins.xLabelsOnTop||t.options.plugins.xLabelsOnTop&&!1===t.options.plugins.xLabelsOnTop.active)return;const e=t.ctx;t.data.datasets.forEach((function(a,i){const s=t.getDatasetMeta(i);s.hidden||s.data.forEach((function(t,i){e.fillStyle="rgba(255, 255, 255, 0.7)",e.font=window.Chart.helpers.fontString(13,"normal","Roboto, Helvetica Neue, Arial");const s=a.data[i].toString()+"k";e.textAlign="center",e.textBaseline="middle";const o=t.tooltipPosition();e.fillText(s,o.x,24),e.save(),e.beginPath(),e.setLineDash([5,3]),e.moveTo(o.x,39),e.lineTo(o.x,o.y-15),e.strokeStyle="rgba(255,255,255,0.12)",e.stroke(),e.restore()}))}))}})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}date(t){var a=new Date(t.target.value);let e=v(a).format("YYYY-MM-DD hh:mm a");console.log("Find statdistics to ",e),this.getAllStadisticsFromBackend(e)}getAllStadisticsFromBackend(t){this._estadPrueba.getAllStadistics(t).pipe(Object(w.a)(this._unsubscribeAll)).subscribe(([t,a,e,i,s])=>{console.log("<--- Get my data English ---\x3e ",t),this.widget2.englishOpin[0].value=t.data[7],this.widget2.datasets[0].data=t.data,console.log("<--- Get my data Spanish ---\x3e ",a),this.widget3.spanishOpin[0].value=a.data[7],this.widget3.datasets[0].data=a.data,console.log("<--- Get my data All ---\x3e ",e),this.widget4.totalOpin[0].value=e.data[7],this.widget4.datasets[0].data=e.data,console.log("<--- Get my data in Interval  English---\x3e ",i[0]),console.log("<--- Get my data in Interval  Spanish---\x3e ",s[0]);let o=[],n=[],d=[],l=[],r=[];void 0!==i[0]&&i.forEach(t=>{void 0!==t.today&&(t.today.forEach(t=>{o.push(t.dateHour),l.push(parseInt(t.opinionsize,10))}),console.log("New list of labels ",o),this.widget5.labels=o,"Ingl\xe9s"==this.widget5.datasets.Hoy[0].label&&(this.widget5.datasets.Hoy[0].data=l,console.log("Search data for English today ",this.widget5.datasets.Hoy[0].data))),void 0!==t.yesterday&&(t.yesterday.forEach(t=>{r.push(parseInt(t.opinionsize,10))}),"Ingl\xe9s"==this.widget5.datasets.Ayer[0].label&&(this.widget5.datasets.Ayer[0].data=r,console.log("Search data for English yesterday ",this.widget5.datasets.Ayer[0].data)))}),void 0!==s&&i.forEach(t=>{void 0!==t.today&&(t.today.forEach(t=>{n.push(parseInt(t.opinionsize,10))}),"Espa\xf1ol"==this.widget5.datasets.Hoy[1].label&&(this.widget5.datasets.Hoy[1].data=n,console.log("Search data for Spanish today ",this.widget5.datasets.Hoy[1].data))),void 0!==t.yesterday&&(t.yesterday.forEach(t=>{d.push(parseInt(t.opinionsize,10))}),"Espa\xf1ol"==this.widget5.datasets.Ayer[1].label&&(this.widget5.datasets.Ayer[1].data=d,console.log("Search data for Spanish yesterday ",this.widget5.datasets.Ayer[1].data)))})})}}return t.\u0275fac=function(a){return new(a||t)(x.Tb(Y.a),x.Tb(Z.a),x.Tb(C.a),x.Tb(k.a),x.Tb(A.c))},t.\u0275cmp=x.Nb({type:t,selectors:[["analytics-dashboard"]],decls:75,vars:40,consts:[["id","dashboard-analytics",1,"page-layout","blank"],[1,"content"],[1,"left","mr-lg-32"],[1,"pb-24","font-size-18","font-weight-300"],["mat-icon-button",""],[1,"secondary-text"],["fxLayout","column","fxLayoutAlign","start","fxLayout.gt-sm","row","fxLayoutAlign.gt-sm","start start"],["fxFlex","100","fxFlex.gt-sm","33",1,"widget"],[1,"fuse-card","auto-width","mb-32",3,"ngClass.gt-sm"],["fxLayout","row wrap","fxLayoutAlign","start end",1,"p-16","pb-0"],[1,"pr-16"],[1,"h2"],[1,"h3","secondary-text"],[1,"font-size-54","font-weight-300","line-height-1","mt-8"],[1,"h-96","w-100-p"],[4,"ngIf"],["baseChart","",3,"datasets","labels","colors","options","chartType"],["fxFlex","100","fxFlex.gt-sm","34",1,"widget"],[1,"fuse-card","auto-width"],[1,"pt-48","pb-24","font-size-18","font-weight-300"],["fxLayout","row","fxLayoutAlign","space-between center",1,"position-relative","p-24"],["fxLayout","column","fxLayoutAlign","start start"],["fxLayout","row","fxLayoutAlign","start center"],[1,"py-8","px-12","border-radius-2","line-height-1","mr-8","cursor-pointer",3,"ngClass","click"],[1,"py-8","px-12","border-radius-2","line-height-1","mr-8","cursor-pointer"],[3,"formGroup"],["matInput","","readonly","","placeholder","Opinion's date","formControlName","usertime",3,"max","matDatepicker","dateChange"],["matSuffix","",3,"for"],["picker",""],[1,"position-relative","h-368","pb-16"]],template:function(t,a){if(1&t&&(x.Zb(0,"div",0),x.Zb(1,"div",1),x.Zb(2,"div",2),x.Zb(3,"div",3),x.Nc(4," Tendencia de Opiniones por idiomas Ingl\xe9s - Espa\xf1ol "),x.Zb(5,"h4"),x.Nc(6),x.Yb(),x.Zb(7,"button",4),x.Zb(8,"h5"),x.Nc(9,"Imprimir:"),x.Yb(),x.Zb(10,"mat-icon",5),x.Nc(11,"print"),x.Yb(),x.Yb(),x.Yb(),x.Ub(12,"br"),x.Zb(13,"div",6),x.Zb(14,"div",7),x.Zb(15,"div",8),x.Zb(16,"div",9),x.Zb(17,"div",10),x.Zb(18,"div",11),x.Nc(19,"Ingl\xe9s"),x.Yb(),x.Zb(20,"div",12),x.Nc(21,"Opiniones en la semana"),x.Yb(),x.Zb(22,"div",13),x.Nc(23),x.Yb(),x.Yb(),x.Yb(),x.Zb(24,"div",14),x.Lc(25,T,3,0,"div",15),x.Ub(26,"canvas",16),x.Yb(),x.Yb(),x.Yb(),x.Zb(27,"div",17),x.Zb(28,"div",8),x.Zb(29,"div",9),x.Zb(30,"div",10),x.Zb(31,"div",11),x.Nc(32,"Espa\xf1ol"),x.Yb(),x.Zb(33,"div",12),x.Nc(34,"Opiniones en la semana"),x.Yb(),x.Zb(35,"div",13),x.Nc(36),x.Yb(),x.Yb(),x.Yb(),x.Zb(37,"div",14),x.Lc(38,D,3,0,"div",15),x.Ub(39,"canvas",16),x.Yb(),x.Yb(),x.Yb(),x.Zb(40,"div",7),x.Zb(41,"div",18),x.Zb(42,"div",9),x.Zb(43,"div",10),x.Zb(44,"div",11),x.Nc(45,"Total de Opiniones"),x.Yb(),x.Zb(46,"div",12),x.Nc(47,"Opiniones en la semana"),x.Yb(),x.Zb(48,"div",13),x.Nc(49),x.Yb(),x.Yb(),x.Yb(),x.Zb(50,"div",14),x.Lc(51,L,3,0,"div",15),x.Ub(52,"canvas",16),x.Yb(),x.Yb(),x.Yb(),x.Yb(),x.Zb(53,"div",19),x.Nc(54," Comportamiento "),x.Yb(),x.Zb(55,"div",18),x.Zb(56,"div",20),x.Zb(57,"div",21),x.Zb(58,"span",11),x.Nc(59,"Ingl\xe9s y Espa\xf1ol"),x.Yb(),x.Yb(),x.Zb(60,"div",22),x.Zb(61,"div",23),x.hc("click",(function(t){return a.widget5SelectedDay="yesterday"})),x.Nc(62," Ayer "),x.Yb(),x.Zb(63,"div",23),x.hc("click",(function(t){return a.widget5SelectedDay="today"})),x.Nc(64," Hoy "),x.Yb(),x.Zb(65,"div",24),x.Zb(66,"form",25),x.Zb(67,"mat-form-field"),x.Zb(68,"input",26),x.hc("dateChange",(function(t){return a.date(t)})),x.Yb(),x.Ub(69,"mat-datepicker-toggle",27),x.Ub(70,"mat-datepicker",null,28),x.Yb(),x.Yb(),x.Yb(),x.Yb(),x.Yb(),x.Zb(72,"div",29),x.Lc(73,O,3,0,"div",15),x.Ub(74,"canvas",16),x.Yb(),x.Yb(),x.Yb(),x.Yb(),x.Yb()),2&t){const t=x.zc(71);x.Fb(6),x.Pc("Campa\xf1a analizada: ",a.campaigns,""),x.Fb(9),x.sc("ngClass.gt-sm","mb-0 mr-32"),x.Fb(8),x.Pc(" ",a.widget2.englishOpin[0].value," "),x.Fb(2),x.sc("ngIf",0==a.widget2.datasets.data.length),x.Fb(1),x.sc("datasets",a.widget2.datasets)("labels",a.widget2.labels)("colors",a.widget2.colors)("options",a.widget2.options)("chartType",a.widget2.chartType),x.Fb(2),x.sc("ngClass.gt-sm","mb-0 mr-32"),x.Fb(8),x.Pc(" ",a.widget3.spanishOpin[0].value," "),x.Fb(2),x.sc("ngIf",0==a.widget3.datasets.data.length),x.Fb(1),x.sc("datasets",a.widget3.datasets)("labels",a.widget3.labels)("colors",a.widget3.colors)("options",a.widget3.options)("chartType",a.widget3.chartType),x.Fb(10),x.Pc(" ",a.widget4.totalOpin[0].value," "),x.Fb(2),x.sc("ngIf",0==a.widget4.datasets.data.length),x.Fb(1),x.sc("datasets",a.widget4.datasets)("labels",a.widget4.labels)("colors",a.widget4.colors)("options",a.widget4.options)("chartType",a.widget4.chartType),x.Fb(9),x.sc("ngClass",x.vc(36,I,"yesterday"===a.widget5SelectedDay)),x.Fb(2),x.sc("ngClass",x.vc(38,I,"today"===a.widget5SelectedDay)),x.Fb(3),x.sc("formGroup",a.dateForm),x.Fb(2),x.sc("max",a.maxDate)("matDatepicker",t),x.Fb(1),x.sc("for",t),x.Fb(4),x.sc("ngIf",0==a.widget5.datasets[a.widget5SelectedDay].data.length),x.Fb(1),x.sc("datasets",a.widget5.datasets[a.widget5SelectedDay])("labels",a.widget5.labels)("colors",a.widget5.colors)("options",a.widget5.options)("chartType",a.widget5.chartType)}},directives:[s.b,n.a,S.c,S.b,S.a,N.a,F.t,b.a,F.q,A.w,A.p,A.h,o.b,g.b,A.b,h.b,A.o,A.f,h.d,o.g,h.a],styles:["#dashboard-analytics .main-widget{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}#dashboard-analytics .content{display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 1 auto;padding:32px;min-width:0}@media screen and (max-width:1279px){#dashboard-analytics .content{-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}}#dashboard-analytics .content .left{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}#dashboard-analytics .content .left,#dashboard-analytics .content .left .widget{-webkit-box-flex:1;flex:1 1 auto;min-width:0}#dashboard-analytics .content .right{display:-webkit-box;display:flex;-webkit-box-flex:0;flex:0 0 auto;width:320px;min-width:320px;max-width:320px}@media screen and (max-width:1279px){#dashboard-analytics .content .right{-webkit-box-flex:1;flex:1 0 100%;margin-top:32px}}@media screen and (max-width:1279px){#dashboard-analytics .content .right,#dashboard-analytics .content .right .fuse-card{width:100%;min-width:0;max-width:none}}"],encapsulation:2,data:{animation:m.a}}),t})();var H=e("FBrc");let B=(()=>{class t{constructor(t){this._httpClient=t}resolve(t,a){return new Promise((t,a)=>{Promise.all([]).then(()=>{t()},a)})}}return t.\u0275fac=function(a){return new(a||t)(x.dc(H.c))},t.\u0275prov=x.Pb({token:t,factory:t.\u0275fac}),t})();var M=e("oof0"),P=e("CaZ3");e.d(a,"AnalyticsDashboardModule",(function(){return z}));const _=[{path:"**",component:E,canActivate:[M.a],resolve:{data:B}}];let z=(()=>{class t{}return t.\u0275mod=x.Rb({type:t}),t.\u0275inj=x.Qb({factory:function(a){return new(a||t)},providers:[B],imports:[[i.k.forChild(_),s.c,o.d,n.b,d.b,l.b,r.c,c.a.forRoot({apiKey:"AIzaSyD81ecsCj4yYpcXSLFcYU97PvRsE_X8Bx8"}),b.b,p.b,f.a,u.a,h.c,g.c,A.t,P.a]]}),t})()}}]);